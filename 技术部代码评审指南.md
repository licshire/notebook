# 一、概述
## 1.1 目的
梳理代码评审流程，为高效、高质量地执行代码评审提供指导。代码评审一方面是为了发现缺陷，另一方面也可以起到经验传播和人员备份的作用。

## 1.2 适用范围
所有项目的代码评审

## 1.3 缩略语和术语

* 自查：由作者自行检查软件代码有无错误，在开发过程中随时进行。
* 互查：由一名指定的评审人员进行代码检查，通过逐行分析，以发现代码中存在的规范、逻辑等问题。互查可以由评审人员独立进行，也可以与作者一同检查。
* 走查：走查活动一般通过会议进行，由作者自己对被评审的代码做详细的介绍，评审人员根据其讲解，指出代码中可能存在的缺陷。在走查中发现的缺陷，由作者在走查会议结束之后进行修复。

## 1.4 职责

| 角色	   | 职责          |
| :------: | -------------|
|项目负责人 |	为代码评审活动安排时间和资源，在项目计划中明确体现 |
|项目负责人 |确定代码评审范围、评审方式和评审成员| 
|项目负责人 |确保评审成员按照指定的要求执行代码评审 |
|作者	   |发起并组织代码评审 |
|作者	   |确认代码评审中发现的问题 |
|作者	   |修复经过确认的缺陷 |
|作者	   |总结缺陷，并不断改进个人的Checklist |
|评审人员	   |参加评审，发现代码中存在的问题输出《代码评审报告》|

# 二、评审方式
代码评审一般在代码通过编译，以解决基本的语法错误之后进行，也可以在单元测试之后进行。评审可根据产品特点、项目类型、工程师的开发经验等方面选择自查、互查或走查方式，选择时可参考如下表格：


|评审方式	 |适用范围 |	说明 |
| :------: | :------: | -------------|
|走查	| 新服务 |	新服务中的核心模块、公用模块和算法比较复杂的模块建议采用走查的方式 |
|互查	| 新服务、维护项目、试用期员工的代码 |	维护项目中新增加的模块、对核心模块和公用模块修改的部分建议采用互查的方式。试用期员工的代码建议由资深的开发人员进行互查。|
|自查	| 维护项目	| 维护项目中对非核心模块、非公用模块进行的修改，或进行的少量局部修改可以采用自查的方式进行 |


# 三、评审流程
无论采用下面任何方式，进行code review时候，都可以借用diff工具并配合code review的checklist，如果是windows操作系统下进行，可以使用beyond compare这样的diff工具以帮助更好的进行review。
## 3.1 自查
由作者自行检查代码中存在的问题。
自查活动不要求输出《代码评审报告》，但需要列出经过自查的源代码文件名。
## 3.2 互查

1. 由项目负责人指定一名评审人员进行，互查可由评审人员独立进行，也可以与作者一起检查。
2. 检查过程中，可由作者进行解释，并回答评审人员的问题。
3. 评审人员发现代码中存在的问题，需记入《代码评审报告》中。
4. 检查完成后，评审人员将《代码评审报告》反馈给作者进行问题确认和修改。
5. 作者将经过确认的《代码评审报告》主送给评审人员。 
6. 特殊情况下，可以在送测以后进行互查（不建议这么做）。要求《代码评审报告》最晚在上线申请前提交。

## 3.3 走查
1. 项目经理指定评审人员
2. 作者发起并组织评审会议。
3. 会议中，由作者自己对被评审的代码做详细的介绍，评审人员根据其讲解，指出代码中可能存在的缺陷。
4. 作者负责记录评审人员提出并确认的问题和建议。
5. 评审会议结束后，由作者对发现的缺陷进行修复，整理完成《代码评审报告》，主送给评审人员。
6. 特殊情况下，可以在送测以后进行走查（不建议这么做）。要求《代码评审报告》最晚在上线申请前提交。